{% extends 'dashbord/dashbord.html' %}
{% load static %}
{% load mathfilters %}


{% block content %}
<div class="get-data tracking-packages repport">
    <div class="content">
        <div class="tracking-content">
            <h4>suivi</h4>
            <div class="filter sreach p-3">
                <form class="row g-3 justify-content-center align-content-center flex-column mb-3" method="GET">
                    <div class="col-6">
                        <input type="text" name="id_received" class="form-control" id="inputEmail4" placeholder="suivi par identifiant reçu">
                        {% comment %} {{formTrackingNumber.form}} {% endcomment %}
                    </div>
                    <div class="col-6 text-center">
                      <button type="submit" class="btn btn-primary w-100">suivi</button>
                    </div>
                </form>
            </div>
            {% for tracking in trackingData %}
            {% if request.GET.id_received == tracking.id_received %}
            <div class="page-tracking">
                <div class="tracking-content">
                    <div class="top-tracking">
                        <div class="info-tracking">
                            <div class="date-tracking">
                                <h5>date:</h5>
                                <p>{{tracking.date}}</p>
                            </div>
                            <div class="order-number">
                                <h5>order N:</h5>
                                <p>{{tracking.id_received}}</p>
                            </div>
                        </div>
                        <hr>
                        <div class="price-tracking">
                            <div class="price-package withdraw">
                                <h5>prix de colis:</h5>
                                {% if tracking.received.total_amount is None %}
                                <p> 0 DH</p>
                                {% else %}
                                <p> {{tracking.received.total_amount}} DH</p>
                                {% endif %}
                            </div>
                            <div class="fee-tracking withdraw">
                                <h5>coût de livraison:</h5>
                                {% if tracking.received.total_withdrawn is None %}
                                <p> 0 DH</p>
                                {% else %}
                                <p> {{tracking.received.total_withdrawn}} DH</p>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="bottom-tracking">
                        <div class="service1 track {{tracking.warehouse}}">warehouse</div>
                        <div class="service2 track {{tracking.city}}">city</div>
                        <div class="service3 track {{tracking.livry}}">livry</div>
                    </div>
                </div>
            </div>
            {% endif %}
            {% endfor %}
        </div>
    </div>
</div>
{% endblock content %}